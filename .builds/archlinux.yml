image: archlinux
packages:
    - zig
tasks:
    - build: |
          cd liskvork
          time zig build --summary all
    - build_all_debug: |
          cd liskvork
          time zig build -Dbuild_all -Doptimize=Debug --summary all
    - build_all_release: |
          cd liskvork
          time zig build -Dbuild_all -Doptimize=ReleaseSafe --summary all
    - test: |
          cd liskvork
          time zig build test --summary all
    - export: |
          cd liskvork
          tar czvf liskvork-dev-builds.tar.gz zig-out/bin/*
          tar cJvf liskvork-dev-builds.tar.xz zig-out/bin/*
artifacts:
    - liskvork/liskvork-dev-builds.tar.gz
    - liskvork/liskvork-dev-builds.tar.xz
